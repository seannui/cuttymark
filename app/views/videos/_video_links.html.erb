<% links = [] %>

<% unless local_assigns[:context] == :show %>
  <% links << {
    title: 'View',
    url: video_path(video)
  } %>
<% end %>

<% links << {
  title: 'Edit',
  url: edit_video_path(video)
} %>

<% links << {
  title: 'Project',
  url: project_path(video.project)
} %>

<% if video.ready? && video.transcript.nil? %>
  <% links << {
    title: 'Transcribe',
    url: transcribe_video_path(video),
    options: { method: :post }
  } %>
<% elsif video.transcript&.failed? %>
  <% links << {
    title: 'Transcribe',
    url: reprocess_video_path(video),
    options: { method: :post }
  } %>
<% elsif video.transcribed? || video.transcript&.completed? %>
  <% links << {
    title: 'Reprocess',
    url: reprocess_video_path(video),
    options: { method: :post }
  } %>
<% end %>

<%= render 'shared/actions_dropdown', links: links %>
